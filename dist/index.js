Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=require("immer"),r=require("react/jsx-runtime");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=t(e),o=function(r){var t,o,a=e.useState([]),c=a[0],i=a[1],f=e.useState(""),s=f[0],l=f[1],d=e.useRef((t=r.targets,o=new Set,t.forEach((function(e){return o.add(e.name)})),Array.from(o)).map((function(e){return{name:e,ref:u.default.createRef()}}))),p=function(e){for(var n=0,r=d.current;n<r.length;n++){var t=r[n];if(t.name===e)return t.ref}return null};return e.useEffect((function(){var e=p(r.initialFocus.target);setTimeout((function(){e&&e.current&&e.current.focus()}),r.initialFocus.delay)}),[]),e.useEffect((function(){var e=function(e,n,r){for(var t=0,u=e;t<u.length;t++)for(var o=u[t],a=0,c=o.keys;a<c.length;a++){var i=c[a],f=i.length===n.length&&i.reduce((function(e,r){return!!e&&n.includes(r)}),!0),s=o.previous,l=r===o.previous;if(s?l&&f:f)return[!0,o]}return[!1,null]}(r.targets,c,s),n=e[0],t=e[1];if(n&&t){var u=p(t.name);u&&u.current&&u.current.focus()}}),[c]),{getRef:p,handleKeyDown:function(e){return i(function(e,r){return n.produce(r,(function(n){!n.includes(e)&&n.push(e)}))}(e.key,c))},handleKeyUp:function(e){return i(function(e,r){return n.produce(r,(function(n){return n.filter((function(n){return n!==e}))}))}(e.key,c))},handleFocus:function(e){l(e.target.name)}}},a=function(){return(a=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var u in n=arguments[r])Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u]);return e}).apply(this,arguments)};exports.FocusTarget=function(n){var t=n.config,u=n.children,c=n.className,i=n.style,f=o(t),s=f.getRef,l=f.handleKeyDown,d=f.handleKeyUp,p=f.handleFocus;return r.jsx("div",a({onKeyDown:l,onKeyUp:d,className:c,style:a({outline:"none"},i),tabIndex:1e3},{children:u.map((function(n){return function(e){switch(e){case"input":case"textarea":return!0;default:return!1}}(n.type)?function(n,r,t){return e.cloneElement(n,{ref:r,onFocus:t})}(n,s(n.props.name),p):n}))}),void 0)},exports.useFocusTarget=o;
//# sourceMappingURL=index.js.map
